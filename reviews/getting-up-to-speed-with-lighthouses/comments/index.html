



<!DOCTYPE html>
<html lang="en" id="webstandardssherpa_com">
<head>

	<meta charset="utf-8">
	<meta http-equiv="Content-Language" content="en"/>
	

	<title>Getting up to Speed with Lighthouses - Web Standards Sherpa</title>
	<meta name="robots" content="index,follow,archive" />
	 <link rel="canonical_url" href="../index.html" /> 
	<meta name='description' content='Responding to Worldwide Lighthouses&rsquo; request to help them speed up their gallery pages, Aaron discusses file &lsquo;munging&rsquo;, compression and organization to improve performance.' />
	<meta name='DC.description' content='Responding to Worldwide Lighthouses&rsquo; request to help them speed up their gallery pages, Aaron discusses file &lsquo;munging&rsquo;, compression and organization to improve performance.' />
	<meta name='keywords' content='CSS,Performance' />
	<meta name='DC.subject' content='CSS,Performance' />

	<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
	<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" />
	<meta name="DC.title" content="Getting up to Speed with Lighthouses - Web Standards Sherpa" />
	<meta name="DC.creator" content="Aaron Gustafson" />
	<meta name="DC.publisher" content="The Web Standards Project" />
	<meta name="DC.date.created" scheme="DCTERMS.W3CDTF" content="2015-12-07T14:45:37-05:00" />
	<meta name="DC.date.modified" scheme="DCTERMS.W3CDTF" content="1453-05-15T08:00:00-05:00" />
	<meta name="DC.date.valid" scheme="DCTERMS.W3CDTF" content="2015-12-13T16:45:37-05:00" />
	<meta name="DC.type" scheme="DCTERMS.DCMIType" content="Text" />
	<meta name="DC.rights" scheme="DCTERMS.URI" content="(cc) Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License">
	<meta name="Copyright" content="(cc) Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License"/>
	<meta name="DC.format" content="text/html" />
	<meta name="DC.identifier" scheme="DCTERMS.URI" content="http://webstandardssherpa.com/reviews/getting-up-to-speed-with-lighthouses/" />
	<meta name="MSSmartTagsPreventParsing" content="true"/>
	<meta name="Rating" content="General"/>

	<meta property="og:title" content="Getting up to Speed with Lighthouses"/> 
	<meta property="og:type" content="article"/> 
	<meta property="og:url" content="http://webstandardssherpa.com/reviews/getting-up-to-speed-with-lighthouses/"/> 
	<meta property="og:image" content="http://webstandardssherpa.com/i/fb-backpack.png"/> 
	<meta property="og:site_name" content="Web Standards Sherpa"/> 
	<meta property="og:description" content="Responding to Worldwide Lighthouses&rsquo; request to help them speed up their gallery pages, Aaron discusses file &lsquo;munging&rsquo;, compression and organization to improve performance."/>
	<meta property="fb:admins" content="100002108202285"/> 
	
	<!-- Twitter -->
	<meta name="twitter:card" value="summary"/>
	<meta name="twitter:site" value="@StandardsSherpa"/>
	<meta name="twitter:creator" value="@AaronGustafson"/>

	

	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<link rel="home" href="../../../index.html"/>
	<link rel="copyright" href="index.html#license"/>
	<link rel="shortcut icon" type="image/png" href="../../../favicon.png"/>
	<link rel="author" type="text/plain" href="../../../humans.txt.html"/>

	<!--[if lte IE 8]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!--[if (lte IE 8)&(!IEMobile)]>
    <link rel="stylesheet" href="/c/old-ie.css" media="screen">
	<![endif]-->
	<!--[if gt IE 8]><!-->
		<link rel="stylesheet" type="text/css" href="../../../c/main.css" media="screen"/>
	<!--<![endif]-->
	<!--[if IEMobile 7]>
		<link rel="stylesheet" href="/c/main.css" media="screen">
		<link rel="stylesheet" href="/c/windows7-mobile.css" media="screen">
	<![endif]-->
	
	<link rel="alternate" type="application/rss+xml" title="Web Standards Sherpa Reviews (Summary)" href="http://feeds.feedburner.com/Web-Standards-Sherpa-Reviews-Summary"/>
	<link rel="alternate" type="application/rss+xml" title="Web Standards Sherpa Reviews (Full Text)" href="http://feeds.feedburner.com/Web-Standards-Sherpa-Reviews"/>
	<link rel="alternate" type="application/rss+xml" title="Web Standards Sherpa Discussions" href="http://feeds.feedburner.com/Web-Standards-Sherpa-Discussions"/>

	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-176472-9']);
		_gaq.push(['_trackPageview']);
		(function() {
		  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
	<script type="text/javascript">
		var WRInitTime=(new Date()).getTime();
	</script>
</head>
<body id="review">


	<header role="banner" id="page-header">
		<h4 id="logo"><a href="../../../index.html" title="Return to the homepage">Web Standards Sherpa</a></h4>
	</header>


		<nav id="nav-primary" role="navigation">
		<ul><li id="nav-home"><a href="../../../index.html">Home</a></li><li id="nav-reviews"><mark><a href="../../index.html">Reviews</a></mark></li><li id="nav-ask-the-sherpas"><a href="../../../ask-the-sherpas/index.html">Ask the Sherpas</a></li>		</ul>

		
	</nav>

	

	<div id="content">


		<article class="hentry">
			<header>
				<h1 class="entry-title">Getting up to Speed with Lighthouses</h1>
				<ul class="meta">
	
					<li class="author">by
						<a href="../../../about/authors/aaron-gustafson/index.html">Aaron Gustafson</a>
					</li>
					<li class="issue"><i>Issue </i><abbr title="Number">No.</abbr> 9</li>
					<li class="published"><time datetime="2011-05-05T04:12:32" pubdate="pubdate">5 May 2011</time></li>
					<li class="categories">
						<ul>
	
							<li><a rel="tag" href="../../by-topic/css/index.html">CSS</a></li>
	
							<li><a rel="tag" href="../../by-topic/performance/index.html">Performance</a></li>
	
						</ul>
					</li>
				</ul>
				
<div id="readspeaker_button1" class="rs_skip rsbtn rs_preserve">
    <a class="rsbtn_play" accesskey="L" title="Listen to this page using ReadSpeaker" href="http://app.na.readspeaker.com/cgi-bin/rsent?customerid=6758&amp;lang=en_us&amp;readid=content&amp;url=http%3A%2F%2Fwebstandardssherpa.com%2Freviews%2Fgetting-up-to-speed-with-lighthouses%2Fcomments%2F">
        <span class="rsbtn_left rsimg rspart"><span class="rsbtn_text"><span>Listen</span></span></span>
        <span class="rsbtn_right rsimg rsplay rspart"></span>
    </a>
</div>

			</header>
			
			<div class="entry-content">
				<figure id="figure-1"> <img class="jail" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="/r/9-1.png" alt=""/><noscript><img src="/r/9-1.png" alt=""/></noscript> </figure>
<p>The web has made it easy to share your passion with others. Whether you collect <a href="http://www.pa.msu.edu/people/horvatin/pez.html"><span class="caps">PEZ</span>&reg; dispensers</a>, <a href="http://www.brickshelf.com/cgi-bin/search.cgi?q=minifig&amp;stype=fi">Lego&reg; minifigs</a>, or <a href="http://www.ldphotography.net/Graves/Famous/">photos of famous people&rsquo;s graves</a>, the advent of the web has been a boon for enthusiasts of all sorts because publishing content requires less time and technical knowledge than it used to.</p>
<p>Add to that the awesome power of database-driven content management systems and web frameworks (for the more technically-inclined) and all of a sudden, you have the opportunity to catalog, organize, and display hundreds if not thousands of images, videos, and audio files for your own pleasure and that of others like you. Of course, as with physical collections, it&rsquo;s quite easy for digital collections to get out of control, and moreover, for pages displaying said collections to become enormous and take a long time to access. Optimization of web pages is key for increasing access to such a collection&mdash;or really any page for that matter. For the purposes of this article, I&rsquo;d like to focus on large collection-type pages.</p>
<p>To get a sense of the type of page I&rsquo;m describing, take a look at <a href="http://www.worldwidelighthouses.com/Lighthouses/English-Lighthouses.php">this collection of English lighthouses</a>. Pretty impressive, right? Worldwide Lighthouses asked us to help them with the performance of their pages which, unsurprisingly, take a bit of time to load. Thankfully, by following a few basic guidelines, many of which were outlined by Steve Souders in <a href="http://developer.yahoo.com/yslow/help/#guidelines">Yahoo!&rsquo;s YSlow Performance Rules</a>, we can get this site to load much more quickly.</p>
<h2>Combine!</h2>
<p>One of the easiest ways to improve the speed of your site is by combining asset files, such as <span class="caps">CSS</span> and JavaScript. Every asset file that is referenced in your documents requires the browser to make a request to the server so it can be retrieved, and each request takes time: precious time, time your users won&rsquo;t get back.</p>
<p>Taking a look at the <span class="caps">HTML</span> of <a href="http://www.worldwidelighthouses.com/Lighthouses/English-Lighthouses.php">the English Lighthouses page</a>, we can see that the author is using three stylesheets and three JavaScript files:</p>
<pre class="html"><code>&lt;link rel="stylesheet" href="http://www.worldwidelighthouses.com/Page-Layout.css" media="screen and (min-width: 481px)"&gt;
&lt;link rel="stylesheet" href="http://www.worldwidelighthouses.com/Mobile-Page-Layout.css" media="only screen and (max-width:480px)"&gt;
&lt;link rel="stylesheet" href="http://www.worldwidelighthouses.com/js/Image-Viewer/jquery.fancybox-1.3.4.css" media="screen and (min-width: 481px)"&gt;
&lt;script src="http://www.worldwidelighthouses.com/js/jquery-1.4.3.min.js"&gt;&lt;/script&gt;
&lt;script src="http://www.worldwidelighthouses.com/js/Image-Viewer/jquery.fancybox-1.3.4.pack.js"&gt;&lt;/script&gt;
&lt;script src="http://www.worldwidelighthouses.com/js/customTransition.js"&gt;&lt;/script&gt;</code></pre>
<p>Each of these stylesheets requires a browser that comprehends media queries in order to access the styles (which is another issue altogether), but let&rsquo;s sidestep that and focus on reducing the number of asset files.</p>
<p>Starting with the styles, those three individual server requests could be reduced to one by &ldquo;munging&rdquo; (or combining) them into a single file, using <code>@media</code> declarations to maintain stylistic separation:</p>
<pre class="css"><code>@media screen and (min-width: 481px) {
  /* contents of Page-Layout.css and jquery.fancybox-1.3.4.css can go here */
}
@media only screen and (max-width:480px) {
  /* contents of Mobile-Page-Layout.css go here */
}</code></pre>
<p>Some of you may be wondering why I recommend <code>@media</code> over <code>@import</code>. The answer is simple: <code>@import</code> still requires the download of additional <span class="caps">CSS</span> files and fewer requests means better performance.</p>
<p>Returning to the markup, if we switch the asset paths for this new, single <span class="caps">CSS</span> file and the JavaScript files from absolute to site root relative URLs (i.e. URLs that start with a leading slash), we can further reduce the size of the <span class="caps">HTML</span> file:</p>
<pre class="html"><code><mark>&lt;link rel="stylesheet" href="/main.css" media="all"&gt;</mark>
&lt;script src="/js/jquery-1.4.3.min.js"&gt;&lt;/script&gt;
&lt;script src="/js/Image-Viewer/jquery.fancybox-1.3.4.pack.js"&gt;&lt;/script&gt;
&lt;script src="/js/customTransition.js"&gt;&lt;/script&gt;</code></pre>
<p>Next up is the JavaScript. As with the <span class="caps">CSS</span>, the JavaScript can be combined to reduce the number of requests to the server. If you decide to munge JavaScript files manually, it&rsquo;s usually recommended that you comment your code well so you know what each piece is when you need to edit the file later. Here&rsquo;s an example:</p>
<pre class="js"><code>/*
 * jQuery JavaScript Library v1.4.3
 &hellip; remainder of comment and code &hellip; */

/*
 * FancyBox - jQuery Plugin
 &hellip; remainder of comment and code &hellip; */

/*
 * My custom JS code
 &hellip; remainder of comment and code &hellip; */</code></pre>
<p>Switching to a single combined JavaScript file for these three scripts would reduce the number of server requests (and the markup), which is pretty sweet:</p>
<pre class="html"><code>&lt;link rel="stylesheet" href="/main.css" media="all"&gt;
<mark>&lt;script src="/js/main.js"&gt;&lt;/script&gt;</mark>
</code></pre>
<p>Combining this code to minimize requests can be a balancing act, in which caching and &ldquo;last-modified&rdquo; dates on files play a role as well. Your site&rsquo;s custom code may be changing quite often, and if that is the case, you may want to keep the relatively static JavaScript code from 3rd party libraries in one location so that it doesn&rsquo;t have to be re-downloaded whenever you tweak your custom code. It would require more server requests, but may end up serving your users better on the whole. And if the library files are already cached, only the headers will be re-downloaded.</p>
<p>Of course, since many web sites probably use the same libraries as your site, you might want to use that to your advantage. <a href="http://jquery.com">JQuery</a>, for example, is a very popular library and you might get better performance if you include it from an external source, such as the&nbsp;<a href="http://code.google.com/apis/libraries/">Google Libraries <span class="caps">API</span></a> and accompanying Content Delivery Network (<span class="caps">CDN</span>). Doing so can have two positive effects on your load speed: 1) chances are pretty good that Google&rsquo;s servers are a helluvalot faster than anything you can afford, so your users will be delivered the file quickly; 2) with a number of sites relying on that same <abbr title="Content Delivery Network"><span class="caps">CDN</span></abbr> source file for jQuery, there&rsquo;s an excellent chance your user&rsquo;s browser may already have the file cached, in which case it won&rsquo;t be downloaded again for use on your site.</p>
<p>Here&rsquo;s how that might look:</p>
<pre class="html"><code>&lt;link rel="stylesheet" href="/main.css" media="all"&gt;
<mark>&lt;script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"&gt;&lt;/script&gt;</mark>
&lt;script src="/js/main.js"&gt;&lt;/script&gt;</code></pre>
<p>Also, if you&rsquo;re worried about the <em>rare</em> chance that Google&rsquo;s <abbr title="Content Delivery Network"><span class="caps">CDN</span></abbr> is down, you can test whether or not jQuery was downloaded successfully, and, if not, fall back to linking to a local copy of the file (code pattern courtesy of <a href="http://html5boilerplate.com/">the <span class="caps">HTML</span>5 Boilerplate project</a>):</p>
<pre class="html"><code>&lt;link rel="stylesheet" href="/main.css" media="all"&gt;
&lt;script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.js"&gt;&lt;/script&gt;
<mark>&lt;script&gt;window.jQuery || document.write("&lt;script src='/js/jquery-1.4.3.min.js'&gt;\x3C/script&gt;")&lt;/script&gt;</mark>
&lt;script src="/js/main.js"&gt;&lt;/script&gt;</code></pre>
<h2>Reorganize!</h2>
<p>Code organization can be as important to your page&rsquo;s performance as how many <code>script</code> and <code>style</code> tags are in your page to begin with. As browsers are parsing an <span class="caps">HTML</span> file, they stop the processing and rendering of the page when they encounter <code>style</code> or <code>script</code> elements.</p>
<p>In the case of <span class="caps">CSS</span>, browsers wait until they have downloaded all style rules before proceeding to render the page; including them in the <code>head</code> of the document ensures your pages begin rendering quickly. Thankfully, multiple <span class="caps">CSS</span> files can also be downloaded simultaneously, further speeding up the process.</p>
<p>The browser stops rendering when loading JavaScript files as well, but it has an additional restriction: <a href="http://yuiblog.com/blog/2007/04/11/performance-research-part-4/">only one JavaScript file can be downloaded at a time</a>, even if the files come from different hostnames or domains. Consequently, including multiple JavaScript files in the <code>head</code> of your document can have a huge effect on both the perceived and actual load times of your pages.</p>
<p>If at all possible, move JavaScript includes to the bottom of your document:</p>
<pre class="html"><code>  &lt;!-- document --&gt;
<mark>  &lt;script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"&gt;&lt;/script&gt;
  &lt;script&gt;window.jQuery || document.write("&lt;script src='/js/jquery-1.4.3.min.js'&gt;\x3C/script&gt;")&lt;/script&gt;
  &lt;script src="/js/main.js"&gt;&lt;/script&gt;</mark>
&lt;/body&gt;</code></pre>
<h2>Compress!</h2>
<p>My final recommendation for improving the speed with which this page loads would be to apply compression wherever possible.</p>
<p>The first place to start would be compressing text files (<span class="caps">HTML</span>, <span class="caps">CSS</span>, and JavaScript) on the server end with <a href="http://www.gzip.org/#intro">gzip</a>. Gzip compression works by finding repeated strings&mdash;such as whitespace, tags, style definitions and the like&mdash;within a text file and replacing them temporarily with a smaller symbol. These symbols can then be used to swap the strings back to their original form once the browser has received the file. All modern browsers support gzip compression, so it&rsquo;s a no-brainer for compressing content.</p>
<p>The next step to decreasing the size of your files would be to use image compression tools like those found in Photoshop&rsquo;s &ldquo;Export for Web and Devices&rdquo; and online tools like <a href="http://www.smushit.com/ysmush.it/">Yahoo!&rsquo;s Smush.it</a> and <a href="http://punypng.com/">PunyPNG</a>. There are lots of resources out there that discuss image compression and optimization, but as this page makes use of PNGs, I&rsquo;d recommend simply running them through one of the online services or <a href="https://github.com/grosser/smusher">Smusher</a>, a command-line interface to Smush.it and PunyPNG. If you&rsquo;re on a Mac and aren&rsquo;t a big fan of the command line, <a href="http://imageoptim.pornel.net/">ImageOptim</a> is another option.</p>
<p>Finally, I&rsquo;d recommend creating compressed versions of every text file. Even though gzip will help a lot, it works even better if your files are already pretty small. For <span class="caps">HTML</span> and <span class="caps">CSS</span> files, where all you really need is whitespace removal, I&rsquo;d opt for something along the lines of <a href="http://www.mikeindustries.com/blog/archive/2005/07/make-your-site-mobile-friendly">what Mike Davidson promoted back in 2005</a>: using global prepend <span class="amp">&amp;</span> append to build an output buffer you can compress using regular expressions. The nice thing about that approach is that you can leave your beautifully-indented original work untouched. And if you&rsquo;re really inspired, you could even cache that result for a little server-side optimization.</p>
<p>On the JavaScript side of things, it gets a little trickier. Bad things can happen when you strip the whitespace from JavaScript files that opt not to use semicolons (<code>;</code>) and curly braces (<code>{}</code>). That&rsquo;s when the <a href="http://developer.yahoo.com/yui/compressor/"><abbr title="Yahoo User Interface"><span class="caps">YUI</span></abbr> Compressor</a> proves itself invaluable. It reads your JavaScript files (and <span class="caps"><span class="caps">CSS</span></span> for that matter) then optimizes the file so that it won&rsquo;t break when compressed.</p>
<p>Conveniently, <a href="https://github.com/grosser/reduce">Reduce</a> acts as a wrapper around Smusher, PunyPNG, and <span class="caps"><span class="caps">YUI</span></span> Compressor, making it a great one-stop shop for command-line compression.</p>
<p>As <a href="index.html#figure-2">the table below</a> shows, after downloading a copy of the English Lighthouses page and spending about 10 minutes using some of these tools, I was able to drop the overall size of the page (and its assets) from around 3.4MB down to 2.5MB. That&rsquo;s a nearly 30% savings before gzip even comes into play. With a little more time, I&rsquo;m sure the files could be squished even more.</p>
<figure id="figure-2"> 
<table>
<thead> 
<tr class="superheader">
<th rowspan="2"></th><th colspan="2">Before</th><th colspan="2">After</th>
</tr>
<tr class="subheader">
<th>Requests</th><th>Size (in <abbr title="Kilobytes">Kb</abbr>)</th><th>Requests</th><th>Size (in <abbr title="Kilobytes">Kb</abbr>)</th>
</tr>
</thead> <tfoot> 
<tr>
<th>Totals</th>
<td class="integer">90</td>
<td class="decimal">3,432.9</td>
<td class="integer">87</td>
<td class="decimal">2,490.9</td>
</tr>
</tfoot> 
<tbody>
<tr>
<th><span class="caps">HTML</span>/Text</th>
<td class="integer">1</td>
<td class="decimal">22.3</td>
<td class="integer">1</td>
<td class="decimal">20.4</td>
</tr>
<tr>
<th><span class="caps">CSS</span></th>
<td class="integer">3</td>
<td class="decimal">22.9</td>
<td class="integer">1</td>
<td class="decimal">21.1</td>
</tr>
<tr>
<th>JavaScript</th>
<td class="integer">3</td>
<td class="decimal">48.4</td>
<td class="integer">2</td>
<td class="decimal">21.6</td>
</tr>
<tr>
<th>Images</th>
<td class="integer">83</td>
<td class="decimal">3,339.3</td>
<td class="integer">83</td>
<td class="decimal">2,427.8</td>
</tr>
</tbody>
</table>
</figure>
				
			
				<section id="extra-mile">
					<h1>Going the <span>Extra Mile</span></h1>
				
					
						<p>On gallery pages similar to the page in question, images form the bulk of the payload that needs to be sent over the wire. In this particular example, images make up over 97% of the bits required to render the page. On top of increasing the overall size of the page, each of those images requires an additional connection to the server. This page alone requires an extra 83 connections to the server in order to download all of the images. When you factor in the reality that most browsers only allow between 2 and 6 simultaneous connections to a given domain, you can bet the browser is going to spend a lot of time twiddling its thumbs, waiting to download the images, regardless of how small they are. It also means a ton of additional requests, making it more difficult for the server to handle heavy traffic&nbsp;spikes.</p>
<p>To address these issues, the Internet Engineering Task Force (<span class="caps">IETF</span>) created <a href="http://en.wikipedia.org/wiki/Data_URI_scheme">data URIs</a>, a means of embedding image data into a text file (typically an <span class="caps">HTML</span> or <span class="caps">CSS</span> file). A data <span class="caps">URI</span> is typically a Base 64-encoded representation of binary data, so it looks like a bunch of gibberish, but the format breaks down like&nbsp;this:</p>
<blockquote>
<p>data:[<span class="caps">MIME</span>-<span class="caps">TYPE</span>][;charset=<span class="caps">ENCODING</span>][;base64],<span class="caps">DATA</span></p>
</blockquote>
<p>Data URIs tend to be quite a bit larger than binary image files (typically about 30% larger) and older browsers (e.g. <span class="caps">IE</span>7 and below) don&rsquo;t understand them. However, on image-heavy sites, they can greatly reduce the number of times the server must be queried to download a resource. Plus, as text, the data <span class="caps">URI</span>-based images can be gzipped as&nbsp;well.</p>
<p>If you&rsquo;re interested in using data URIs without having to worry about older versions of <span class="caps">IE</span>, <a href="http://code.google.com/p/modpagespeed/">Google&rsquo;s mod_pagespeed for Apache</a> is a great tool. It determines whether or not data URIs are acceptable to a given browser and alters the content accordingly. It&rsquo;s pretty easy to set up too; in fact, we got it up and running here on the Sherpa site in under 10&nbsp;minutes.</p>
				</section>
			
				<section id="takeaways">
				<section id="pitfalls" class="takeaway">

					<h1>Pitfalls to Avoid</h1>

					<ul>
<li>Don&#8217;t require your users to download more than one or two JavaScript or <span class="caps">CSS</span> files without good&nbsp;reason.</li>
<li>Don&#8217;t develop a <dfn title="a philosophy or practice characterized by a usually deliberate abstention from direction">laissez-faire</dfn> attitude when it comes to source&nbsp;order.</li>
</ul>
				</section>
				<section id="todos" class="takeaway">

					<h1>Things to Do</h1>

					<ul>
<li>Combine your <span class="caps">CSS</span> and JavaScript files whenever&nbsp;possible.</li>
<li>Move your JavaScript to the bottom of your&nbsp;document.</li>
<li>Compress&nbsp;everything.</li>
<li>If you have an automated build or release process for your site, find a way to automate the file compression and image optimization as a step in that&nbsp;process.</li>
</ul>
				</section>
				</section>
			


				<section id="further-reading">
					<h1>Further Reading</h1>
					<ul>
	
		
						<li class="blog">&#8220;<a href="http://stevesouders.com/hpws/rules.php">14 Rules for Faster-Loading Web Sites</a>&#8221;, High Performance Web Sites, 18 September 2007</li>
	
		
						<li class="presentation">&#8220;<a href="http://www.slideshare.net/stubbornella/designing-fast-websites-presentation">Design Fast Websites</a>&#8221;, Yahoo! Frontend Engineering Summit, 15 October 2009</li>
	
		
						<li class="presentation">&#8220;<a href="http://www.webdirections.org/resources/nicholas-zakas-high-performance-javascript/">High Performance JavaScript</a>&#8221;, Web Directions, 23 September 2010</li>
	
					</ul>
				</section>
			</div>
			
		</article>
					<section id="comments" style="display: none">
			<header>
				<h1 class="question">Do you optimize your sites? If so, why? If not, why&nbsp;not?</h1>
			</header>
				
		<div id="comments-listing">
		<h1>Discussion</h1>
		<ul class="meta">
			<li class="thoughts">
			 			 	Thoughts posted: 8</li>
			 			 <li class="buttons"><a href="index.html#comment">Tell us</a></li>
		</ul>
		




	<ol class="hfeed comments">			<li id="comment-79" class="hentry">
			<p class="meta">
				<a rel="bookmark" href="../comments.1.html#comment-79"><time class="published" datetime="2011-05-05T13:37:24" pudate="pubdate">4 years ago</time></a>, 
				<span class="author vcard"><a class="url" href="http://twitter.com/2DForever"><b class="fn">Tom Waterhouse</b><img class="photo" src="http://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?s=48&d=/i/a/default_set/shirley.png" alt=""/></a></span>&nbsp;said:</p>
				<blockquote class="entry-content">
				
					<p>It&#8217;s a great thing to do, and I go to some lengths to optimise my site as well&#8230; but it&#8217;s *such* an effort for a few bytes when the biggest obstacle is large imagery or other&nbsp;media.</p>

<p>In the case of the lighthouses example here all those tweaks will help the page load quickly, but it&#8217;s still got loads of imagery to grab&#8230; which as you said at the end of the article, accounts for 97% of the&nbsp;page!</p>

<p>I&#8217;d definitely recommend to everyone to optimise their site, but the biggest gains seem like it&#8217;ll always be in your media, not the code. Optimising is&nbsp;good :)</p>
				</blockquote>
		</li>
	

				<li id="comment-80" class="hentry staff">
			<p class="meta">
				<a rel="bookmark" href="../comments.1.html#comment-80"><time class="published" datetime="2011-05-05T16:06:01" pudate="pubdate">4 years ago</time></a>, 
				<span class="author vcard"><a class="url" href="http://aaron-gustafson.com"><b class="fn">Aaron Gustafson</b><img class="photo" src="http://www.gravatar.com/avatar/323311bb4cc5af1a4b2c5c26b4cfc5a3?s=48&d=/i/a/default_set/shirley.png" alt=""/></a></span>&nbsp;said:</p>
				<blockquote class="entry-content">
				
					<p>I could not agree more with you&nbsp;Tom:</p>

<blockquote><p>I’d definitely recommend to everyone to optimise their site, but the biggest gains seem like it’ll always be in your media, not the&nbsp;code.</p>
</blockquote>

<p>Crushing your images (and videos) helps a lot, and on a gallery page like this, that may be the best you can hope for. For larger content images, however, going the <a href="https://github.com/filamentgroup/Responsive-Images">Responsive Images</a> route or using data URIs will probably get you a better outcome&nbsp;overall.</p>
				</blockquote>
		</li>
	

				<li id="comment-82" class="hentry">
			<p class="meta">
				<a rel="bookmark" href="../comments.1.html#comment-82"><time class="published" datetime="2011-05-12T08:37:21" pudate="pubdate">4 years ago</time></a>, 
				<span class="author vcard"><b class="fn">planet71</b><img class="photo" src="http://www.gravatar.com/avatar/386eea9cac378944468b8a0dcb254465?s=48&d=/i/a/default_set/shirley.png" alt=""/></span>&nbsp;said:</p>
				<blockquote class="entry-content">
				
					<p>Great article. I have two question&nbsp;though:</p>

<p>1) Does it really matter if you load your external scripts just before body close tag or in head section as far as you wait until <span class="caps">DOM</span> structure is loaded? I mean, I&#8217;m using jQuery library, and I generally load my external scripts in head section, but I alway use <code>$function()&#123; &#125;)</code>. And if it makes a diffrenece, than how and why everybody load their script in head section anyway (like you for&nbsp;example)? :)</p>

<p>2) What about <span class="caps">CSS</span> Sprites? You didn&#8217;t mentioned it and it seemes to be a good way to minimize <span class="caps">HTTP</span> requests, don&#8217;t you think? And if you agree with that, what is the reason, in your opinion, why people don&#8217;t use it (because the don&#8217;t and that&#8217;s the&nbsp;fact)?</p>
				</blockquote>
		</li>
	

				<li id="comment-83" class="hentry staff">
			<p class="meta">
				<a rel="bookmark" href="../comments.1.html#comment-83"><time class="published" datetime="2011-05-12T11:35:54" pudate="pubdate">4 years ago</time></a>, 
				<span class="author vcard"><a class="url" href="http://aaron-gustafson.com"><b class="fn">Aaron Gustafson</b><img class="photo" src="http://www.gravatar.com/avatar/323311bb4cc5af1a4b2c5c26b4cfc5a3?s=48&d=/i/a/default_set/shirley.png" alt=""/></a></span>&nbsp;said:</p>
				<blockquote class="entry-content">
				
					<p>Thanks for your questions,&nbsp;planet71.</p>

<blockquote><p>Does it really matter if you load your external scripts just before <code>body</code> close tag or in <code>head</code> section as far as you wait until <span class="caps">DOM</span> structure is&nbsp;loaded?</p>
</blockquote>

<p>I&#8217;m not sure exactly what you’re asking, but I&#8217;ll take a stab at answering the two possibilities I see. As I mentioned in the article, scripts block the loading of your page, so loading large script files early on in the page can absolutely increase the overall load time of your page (in terms of how long it takes for the page to render). If your concern is <span class="caps">DOM</span> availability, scripts loaded in the <code>head</code> that attempt to access the <span class="caps">DOM</span> immediately (e.g. <em>not</em> being triggered to run <code>onload</code> or <code>onDomReady</code>) will likely throw errors or fail to execute properly because the elements they are looking to manipulate or access are not available&nbsp;yet.</p>

<blockquote><p>And if it makes a diffrenece, than how and why everybody load their script in <code>head</code> section anyway (like you for&nbsp;example)?</p>
</blockquote>

<p>If you view this site’s source, you&#8217;ll see that most of our scripts are indeed loaded just before the close of the <code>body</code> element. The only scripts that are in the <code>head</code> are those that are recommended or required to be there for a specific reason (Google Analytics, ClickTale, the <span class="caps">HTML</span>5 shim). I can’t speak for other sites, but people who are concerned with performance follow this same pattern as it&#8217;s a good rule of thumb, to be broken only when absolutely&nbsp;necessary.</p>

<blockquote><p> What about <span class="caps">CSS</span> Sprites? You didn’t mentioned it and it seemes to be a good way to minimize <span class="caps">HTTP</span> requests, don’t you think? And if you agree with that, what is the reason, in your opinion, why people don’t use it (because the don’t and that’s the&nbsp;fact)?</p>
</blockquote>

<p>I think <span class="caps">CSS</span> sprites make sense in certain situations, but not in all situations. They are a bit more difficult to maintain if you change your graphics often and they can also be problematic if you are using elastic (em-based) layouts. If you&#8217;re layouts are set up in pixels, it’s not a big deal and sprites can really work for you, but to me, dataURIs generated on the server side by something like mod_pagespeed are a decent alternative (despite the increase in file size they&nbsp;introduce).</p>
				</blockquote>
		</li>
	

				<li id="comment-91" class="hentry">
			<p class="meta">
				<a rel="bookmark" href="../comments.1.html#comment-91"><time class="published" datetime="2011-05-21T17:57:09" pudate="pubdate">4 years ago</time></a>, 
				<span class="author vcard"><a class="url" href="http://www.facebook.com/kingwalton"><b class="fn">Thomas Welton</b><img class="photo" src="http://www.gravatar.com/avatar/c57c2038a05e2e77aa704826b45ba2cb?s=48&d=/i/a/default_set/shirley.png" alt=""/></a></span>&nbsp;said:</p>
				<blockquote class="entry-content">
				
					<p>I agree that <span class="caps">CSS</span> sprites can be a pain to manage. But recently I&#8217;ve started using compass, which helps you write awesome <span class="caps">CSS.</span> And it does other cool stuff like automatic sprite&nbsp;generation</p>

<p><a href="http://compass-style.org/help/tutorials/spriting/" title="Compass Sprite tutorial">http://compass-style.org/help/tutorials/spriting/</a></p>

<p>Basically you give compass an image directory, and you can tell it to import all the image files inside of it. The directory contains your small icons, lets say it contains 100 small icons 16x16 px all with descriptive file names like&nbsp;profile.png</p>

<p>Compass will gather up all the small files, put them into a vertical sprite map, and generate all the <span class="caps">CSS</span> required. It generates <span class="caps">CSS</span> classes based on the directory name and the file name. So using the sprites is as simple as adding a class name like sprites-profile to an&nbsp;element.</p>

<p>Also Compass can minify the <span class="caps">CSS</span> it generates for you resulting in smaller files sizes which would also improve the site&#8217;s load&nbsp;time.</p>
				</blockquote>
		</li>
	

				<li id="comment-92" class="hentry">
			<p class="meta">
				<a rel="bookmark" href="../comments.1.html#comment-92"><time class="published" datetime="2011-05-22T17:51:13" pudate="pubdate">4 years ago</time></a>, 
				<span class="author vcard"><a class="url" href="http://www.facebook.com/profile.php?id=1584255504"><b class="fn">Danny Brown</b><img class="photo" src="http://www.gravatar.com/avatar/a2094ddef080e90947e3d5cd7e9b1e75?s=48&d=/i/a/default_set/shirley.png" alt=""/></a></span>&nbsp;said:</p>
				<blockquote class="entry-content">
				
					<p>Hi&nbsp;Aaron,</p>

<p>Thanks for reviewing the site :) It was much appreciated. I&#8217;m going to implement a lot of the ideas you had in the next version of the site (believe it or not this is the first database driven version of the site, it was all just written <span class="caps">HTML</span> - which was stupidly difficult to maintain before) so I&#8217;m still working on the back end. But a new <span class="caps">UI</span> with a lot of your features and some server side image optimization is&nbsp;coming :)</p>

<p>I think this article will help a lot of other budding web designers too, so&nbsp;kudos!</p>

<p>Thanks Again,<br />&nbsp;Danny</p>

<p><span class="caps">PS</span>: Sorry for taking a long time to give feedback, I read the article the day it was put on the site but I have had non-stop coursework and exams at 6th Form&nbsp;since :)</p>
				</blockquote>
		</li>
	

				<li id="comment-95" class="hentry">
			<p class="meta">
				<a rel="bookmark" href="../comments.1.html#comment-95"><time class="published" datetime="2011-06-05T16:46:30" pudate="pubdate">4 years ago</time></a>, 
				<span class="author vcard"><a class="url" href="http://twitter.com/Sanchycom"><b class="fn">Sanchy.com</b><img class="photo" src="http://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?s=48&d=/i/a/default_set/shirley.png" alt=""/></a></span>&nbsp;said:</p>
				<blockquote class="entry-content">
				
					<p>First I&#8217;d like to say that your site it&#8217;s simply amazing. I haven&#8217;t come around many sites that talk about real Web design. The only &#8220;bad&#8221; thing I could say is that new reviews come a bit slow but I understand that it&#8217;s a lot of work, and hard&nbsp;work.</p>

<p>Anyways, I loved this article, there are so many new things to learn. Placing the scripts at the bottom of the &lt;body&gt; increased my sites&#8217; speed hugely, and those sites like PunyPNG are really&nbsp;great.</p>

<p>Thanks a lot for sharing your knowledge. I live in a very small and outdated country (Uruguay) and if it weren&#8217;t for people like you, I&#8217;d be stuck designing web Sites like we were still in&nbsp;1995.</p>

<p><strong>Congrats on the Site and thank you very&nbsp;much!</strong></p>
				</blockquote>
		</li>
	

				<li id="comment-171" class="hentry">
			<p class="meta">
				<a rel="bookmark" href="../comments.1.html#comment-171"><time class="published" datetime="2013-03-29T08:57:50" pudate="pubdate">2 years ago</time></a>, 
				<span class="author vcard"><a class="url" href="http://www.rakki.nl/"><b class="fn">sushibezorgenbussen</b><img class="photo" src="http://www.gravatar.com/avatar/0959874b2f498e0c3d6076fe78082820?s=48&d=/i/a/default_set/shirley.png" alt=""/></a></span>&nbsp;said:</p>
				<blockquote class="entry-content">
				
					<p>I have to optimize my site..this will&nbsp;help</p>
				</blockquote>
		</li>
	</ol>
			
	</div>
	
<section id="comment">
	<h1>Share Your Thoughts</h1>
			<p>Please <a href="../../../log-in/index.html%3Freturn=%252Freviews%252Fgetting-up-to-speed-with-lighthouses%252F.html" style="display: none">Log in</a> or <a href="../../../sign-up/index.html%3Freturn=%252Freviews%252Fgetting-up-to-speed-with-lighthouses%252F.html" style="display: none">Sign up</a> to share your thoughts.</p>
		</section>


			</section>
		

		
		
		
	   <ul id="pagination">
	     <li class="prev"><a href="../../designing-scannable-headlines/index.html"><em>Previous Entry: </em>Designing Scannable&nbsp;Headlines</a></li>
	     <li class="next"><a href="../../overlays-and-lightboxes-keys-to-success/index.html"><em>Next Entry: </em>Overlays and Lightboxes: Keys to&nbsp;Success</a></li>
	   </ul>

		
		<footer class="sidebar" role="complementary">
		
				
		<section id="author" class="sidebar-item vcard byline">
			<h1>Your Sherpa</h1>
	
	
		
		<h2><a class="fn url" href="../../../about/authors/aaron-gustafson/index.html">
			<img class="photo" src="../../../i/a/uploads/avatar_1.jpg" alt=""/>Aaron Gustafson</a></h2>
		<p>Aaron Gustafson is the Founder <span class="amp">&amp;</span> Tech Lead of Easy Designs, a content-focused web development consultancy, and the author of Adaptive Web&nbsp;Design.</p>
		<p class="more"><a href="../../../about/authors/aaron-gustafson/index.html">More about Aaron</a></p>
	
</section>

			
			
		
			
				

			<section id="share" class="sidebar-item entry-unrelated">

				<h1>Share</h1>

				<p id="twitter"><a href="https://twitter.com/intent/tweet?original_referer=http%3A%2F%2Fwebstandardssherpa.com%2Freviews%2Fgetting-up-to-speed-with-lighthouses%2Fcomments%2F&amp;source=tweetbutton&amp;text=Getting+up+to+Speed+with+Lighthouses+by+@AaronGustafson&amp;url=http%3A%2F%2Fwebstandardssherpa.com%2Freviews%2Fgetting-up-to-speed-with-lighthouses%2Fcomments%2F&amp;via=StandardsSherpa%20%23wssherpa%20%23sherpa9&amp;related=WaSP:Web%20Standards" title="Tweet"><img src="/i/button-twitter.png" alt=""/></a> <b class="hashtag"><em>Hashtag:</em> #sherpa9</b></p>
                <p id="facebook"><a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwebstandardssherpa.com%2Freviews%2Fgetting-up-to-speed-with-lighthouses%2Fcomments%2F" title="Share on Facebook"><img src="/i/button-facebook.png" alt=""/></a></p>
				<p id="linkedin"><a href="https://www.linkedin.com/cws/share?url=http%3A%2F%2Fwebstandardssherpa.com%2Freviews%2Fgetting-up-to-speed-with-lighthouses%2Fcomments%2F&amp;original_referer=http%3A%2F%2Fwebstandardssherpa.com%2Freviews%2Fgetting-up-to-speed-with-lighthouses%2Fcomments%2F" title="Share on LinkedIn"><img src="/i/button-linkedin.png" alt=""/></a></p>
				<p id="google_plus"><a href="https://plus.google.com/share?url=http%3A%2F%2Fwebstandardssherpa.com%2Freviews%2Fgetting-up-to-speed-with-lighthouses%2Fcomments%2F" title="Share on Google Plus"><img src="/i/button-googleplus.png" alt=""/></a></p>
			</section>
			
			
						<section id="standards-fact" class="sidebar-item entry-unrelated">

				<h1>Standards Fact</h1>


				<p>As of January 2009, all websites built for the <span class="caps">UK</span> government&nbsp;must follow a set of guidelines that includes compliance with web&nbsp;standards.</p>

			</section>

			
	<section id="submit-a-site" class="sidebar-item entry-unrelated">
		<p><a href="../../../submit-a-site/index.html"><img src="../../../i/feed-shirley-222x99.png" alt="Submit a site for Review" /></a></p>
	</section>



		</footer>
	
	  </div>
  		<form style="display: none" id="search-form" method="post" action="../../../index.html"  >
<div class='hiddenFields'>
<input type="hidden" name="ACT" value="6" />
<input type="hidden" name="XID" value="2f61442d50f5579c10e2f6fe9e660907ac502e1c" />
<input type="hidden" name="RES" value="10" />
<input type="hidden" name="meta" value="vJed+IEhaFn3W7jNVVY8C6VK4KKB0doGerxtt+3TXJkJkrK5M3OFhLNfv7UrH+uJhVYy/SM2Y8CEBzxS9ZAY+5Ry234MoWdF0KwpptDKKX/rJJg1NP4Y7SntDPwMKWd0mrV/+nbWgdpLXyGAXHtWDd/W8QMHWePL8qfhqCpJzaK4pU2LxFEhOj26ZDN4P+8d8hXffYqEVMiMRDrkUYAlZAa+r08a/igafmWKpfXqcmFAHWq/qsh+zoaTz9V6wiUJl2MMAdfHTEZ76nZbWvE5NUZpcvtxRexke8gSzhsFUK46dJJ8pJfmOvPccKB8bfwmBU4cgAZ668OleVhPUZRHiYhGfX21C2DodUFydLdhuEPR2Upj1jdw5RfdVF8nWXwA5G5T4DRd4xKMtKvVvr1BpJKZ37Gid+DBZjiqIcAhYCY=" />
<input type="hidden" name="site_id" value="1" />
</div>


		<p role="search">
			<label for="query">Looking for something?</label>
			<input type="search" name="keywords" id="query" value=""/>
			<button type="submit">Search</button>
		</p>
	</form>

    	<nav id="nav-account" style="display: none" role="navigation">
		<ul class="buttons">
	
			<li><a href="../../../sign-up/index.html" style="display: none">Sign up</a></li>
	
	
			<li><a href="../../../log-in/index.html" style="display: none">Log in</a></li>
	
		</ul>
	</nav>
  <footer role="contentinfo" id="page-footer">
	<div id="site-info">
			<div id="elevator-pitch" class="footer-item">

		<p>Web Standards Sherpa&rsquo;s experts provide helpful, pragmatic and up-to-date advice on best practices for web professionals everywhere.</p>
<ul class="more">
<li><a href="../../../about/index.html">More about us</a></li>
<li><a href="../../../contact/index.html" style="display: none">Contact us</a></li>
</ul>

	</div>
			<nav id="nav-complete" role="navigation">
		<section class="participate" style="display: none">
			<h1>Participate</h1>
			<ul>
				<li><a href="../../../submit-a-site/index.html">Submit a site</a></li>
				<li><a href="../../../submit-a-question/index.html">Submit a question</a></li>
				<li><a href="../../../sign-up/index.html" style="display: none">Sign up</a><a href="../../../log-in/index.html" style="display: none">Log in</a></li>
				
			</ul>
		</section>
		<section class="learn">
			<h1>Learn</h1>
			<ul>
				<li><mark><a href="../../index.html">Reviews</a></mark></li>
				<li><a href="../../../ask-the-sherpas/index.html">Ask Sherpas</a></li>
				<li><a href="../../../about/authors/index.html">Authors</a></li>
				<li><a href="../../../glossary/index.html">Glossary</a></li>
				
			</ul>
		</section>
	</nav>

			<section id="sponsors" class="footer-item">

		<h1>We thank our sponsors</h1>

				<ol class="partners">					<li>
											<a href="http://www.microsoft.com"><img src="../../../i/p/microsoft-mono.png" alt="Microsoft"/></a>
										</li>
				
									<li>
											<a href="http://mailchimp.com"><img src="../../../i/p/mc-mono.png" alt="MailChimp"/></a>
										</li>
				
									<li>
											<a href="http://developer.mozilla.org"><img src="../../../i/p/mozilla-mono.png" alt="Mozilla"/></a>
										</li>
				
									<li>
											<a href="http://mediatemple.net"><img src="../../../i/p/mt-mono.png" alt="Media Temple"/></a>
										</li>
				</ol>

	</section>
	</div>
	<div id="terms" class="source-org vcard">
		<p id="ownership"><a xmlns:dct="http://purl.org/dc/terms/" href="../../../index.html" property="dct:title" rel="cc:attributionURL">Web Standards Sherpa</a> is an outreach effort by the <a class="org fn url" xmlns:cc="http://creativecommons.org/ns#" href="http://webstandards.org" property="cc:attributionName">Web Standards Project (WaSP)<img src="../../../i/WaSP-logo-mono.png" alt="" /></a>.</p>
<!--		<p id="network">This site is a proud member of the <a rel="license" href="http://network.smashingmagazine.com/">Smashing Network<img src="/i/p/smashing-mono.png" alt="" /></a>.</p> -->
		<p id="license">The content of this site is licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons<img src="../../../i/license.png" alt="" /></a>.</p>
	</div>
	
  </footer>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
	<script>window.jQuery || document.write("<script src='../../../j/jquery.js'>\x3C/script>")</script>
	<script src="../../../j/main.js"></script>
	
					<script>(function(e,t){var n=t(jQuery),r=typeof define=="function"&&define.amd;r?define(e,["jquery"],n):(this.jQuery||this.$||this)[e]=n})("jail",function(e){function s(e,n){var r=!1;!n||(r=n.data("triggerElem")),!!r&&typeof r.on=="function"&&(r.on(e.event+"."+e.id,{options:e,images:n},u),t.on("resize."+e.id,{options:e,images:n},u))}function o(e){var t=0;if(e.length===0)return;for(;;){if(t===e.length)break;e[t].getAttribute("data-src")?t++:e.splice(t,1)}}function u(n){var i=n.data.images,u=n.data.options;i.data("poller",setTimeout(function(){r=e.extend({},i),o(r),e(r).each(function(){if(this===window)return;f(u,this,r)});if(a(r)){e(n.currentTarget).unbind(n.type+"."+u.id);return}if(u.event!=="scroll"){var l=/scroll/i.test(u.event)?i.data("triggerElem"):t;u.event="scroll",i.data("triggerElem",l),s(u,e(r))}},u.timeout))}function a(t){var n=!0;return e(t).each(function(){!e(this).attr("data-src")||(n=!1)}),n}function f(n,r,i){var s=e(r),o=/scroll/i.test(n.event)?i.data("triggerElem"):t,u=!0;n.loadHiddenImages||(u=h(s,o,n)&&s.is(":visible")),u&&l(o,s,n.offset)&&c(n,s)}function l(e,t,n){var r=e[0]===window,i=r?{top:0,left:0}:e.offset(),s=i.top+(r?e.scrollTop():0),o=i.left+(r?e.scrollLeft():0),u=o+e.width(),a=s+e.height(),f=t.offset(),l=t.width(),c=t.height();return s-n<=f.top+c&&a+n>=f.top&&o-n<=f.left+l&&u+n>=f.left}function c(t,n){var s=new Image;s.onload=function(){n.hide().attr("src",s.src),n.removeAttr("data-src"),t.effect?(t.speed?n[t.effect](t.speed):n[t.effect](),n.css("opacity",1),n.show()):n.show(),o(r),!t.callbackAfterEachImage||t.callbackAfterEachImage.call(this,n,t),a(r)&&!!t.callback&&!i&&(t.callback.call(e.jail,t),i=!0)},s.src=n.attr("data-src")}function h(n,i,o){var u=n.parent(),a=!0;while(u.length&&u.get(0).nodeName.toUpperCase()!=="BODY"){if(u.css("overflow")==="hidden"){if(!l(u,n,o.offset)){a=!1;break}}else if(u.css("overflow")==="scroll"&&!l(u,n,o.offset)){a=!1,e(r).data("triggerElem",u),o.event="scroll",s(o,e(r));break}if(u.css("visibility")==="hidden"||n.css("visibility")==="hidden"){a=!1;break}if(i!==t&&u===i)break;u=u.parent()}return a}var t=e(window),n={id:"jail",timeout:1,effect:!1,speed:400,triggerElement:null,offset:0,event:"load",callback:null,callbackAfterEachImage:null,placeholder:!1,loadHiddenImages:!1},r=[],i=!1;return e.jail=function(t,r){var i=t||{},s=e.extend({},n,r);e.jail.prototype.init(i,s),/^(load|scroll)/.test(s.event)?e.jail.prototype.later.call(i,s):e.jail.prototype.onEvent.call(i,s)},e.jail.prototype.init=function(n,r){n.data("triggerElem",r.triggerElement?e(r.triggerElement):t),!r.placeholder||n.each(function(){e(this).attr("src",r.placeholder)})},e.jail.prototype.onEvent=function(t){var n=this;t.triggerElement?s(t,n):n.on(t.event+"."+t.id,{options:t,images:n},function(t){var n=e(this),i=t.data.options,s=t.data.images;r=e.extend({},s),c(i,n),e(t.currentTarget).unbind(t.type+"."+i.id)})},e.jail.prototype.later=function(t){var n=this;setTimeout(function(){r=e.extend({},n),n.each(function(){f(t,this,n)}),t.event="scroll",s(t,n)},t.timeout)},e.fn.jail=function(t){return new e.jail(this,t),r=[],this},e.jail});

(function($){$("img.jail").jail({offset:100});}(jQuery));</script>
				
			<script src="../../../j/live-comment-preview.js" type="text/javascript"></script>
		
	

	<!-- Just to see if this works -->
	<!--[if lte IE 6]><script src="/j/ie6.js"></script><![endif]-->


			<script type="text/javascript">
			  var rpxJsHost = (("https:" == document.location.protocol) ? "https://" : "http://static.");
			  document.write(unescape("%3Cscript src='" + rpxJsHost + "rpxnow.com/js/lib/rpx.js' type='text/javascript'%3E%3C/script%3E"));
			</script>

			<script type="text/javascript">
				RPXNOW.overlay = true;
		  		RPXNOW.language_preference = "en";
			  	RPXNOW.init({appId: 'cdnifhbomckchfhfgbpl', xdReceiver: '/rpx_xdcomm.html'});
			</script>

	<div id="ClickTaleDiv" style="display: none;"></div>
	<script type="text/javascript">
		if ( document.location.protocol!='https:' )
		{
			$.getScript('http://s.clicktale.net/WRb6.js',function(){
				if ( typeof ClickTale=='function' )
				{ClickTale(16473,0.1,"www02");}
			});
		}
	</script>
</body>
</html>

